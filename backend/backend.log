INFO:     Will watch for changes in these directories: ['/Users/fatihbayraktar/fashion AI/backend']
INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
INFO:     Started reloader process [31124] using StatReload
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [31127]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
INFO:app.main:Incoming request: OPTIONS /outfits/generate
INFO:app.main:Finished request: OPTIONS /outfits/generate - Status=200 - Time=0.0013s
INFO:     127.0.0.1:64975 - "OPTIONS /outfits/generate HTTP/1.1" 200 OK
INFO:app.main:Incoming request: POST /outfits/generate
INFO:app.routers.outfits:Generating outfit for prompt: Coachella Dreams âœ¨
INFO:app.routers.outfits:ANTHROPIC_API_KEY status: Found
INFO:app.routers.outfits:Calling Claude API (attempt 1/3)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:app.routers.outfits:Claude API response received in 52.52s
INFO:app.routers.outfits:Successfully extracted 3 outfit concepts
INFO:app.routers.outfits:SerpAPI search attempt 1/2 for crop top - White crochet lace crop top with scalloped edges
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.serpapi_service:Searching for products: White crochet lace crop top with scalloped edges (category: crop top, gender: female)
INFO:app.services.serpapi_service:Using site targeted query: White crochet lace crop top with scalloped edges (site:amazon.com OR site:nordstrom.com OR site:farfetch.com OR site:ssense.com)
/Users/fatihbayraktar/fashion AI/backend/app/services/serpapi_service.py:284: RuntimeWarning: coroutine 'AsyncClient.get' was never awaited
  async with client.get(self.search_url, params=params) as response:
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
ERROR:app.services.serpapi_service:Error searching SerpAPI: 'coroutine' object does not support the asynchronous context manager protocol
WARNING:app.services.serpapi_service:Using fallback products for: White crochet lace crop top with scalloped edges
INFO:app.routers.outfits:Found 6 products for crop top
INFO:app.routers.outfits:SerpAPI search attempt 1/2 for shorts - High-waisted denim cut-off shorts with frayed hem
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.serpapi_service:Searching for products: High-waisted denim cut-off shorts with frayed hem (category: shorts, gender: female)
INFO:app.services.serpapi_service:Using site targeted query: High-waisted denim cut-off shorts with frayed hem (site:amazon.com OR site:nordstrom.com OR site:farfetch.com OR site:ssense.com)
ERROR:app.services.serpapi_service:Error searching SerpAPI: 'coroutine' object does not support the asynchronous context manager protocol
WARNING:app.services.serpapi_service:Using fallback products for: High-waisted denim cut-off shorts with frayed hem
INFO:app.routers.outfits:Found 6 products for shorts
INFO:app.routers.outfits:SerpAPI search attempt 1/2 for kimono - Sheer floral print kimono with fringe trim
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.serpapi_service:Searching for products: Sheer floral print kimono with fringe trim (category: kimono, gender: female)
INFO:app.services.serpapi_service:Using site targeted query: Sheer floral print kimono with fringe trim (site:amazon.com OR site:nordstrom.com OR site:farfetch.com OR site:ssense.com)
ERROR:app.services.serpapi_service:Error searching SerpAPI: 'coroutine' object does not support the asynchronous context manager protocol
WARNING:app.services.serpapi_service:Using fallback products for: Sheer floral print kimono with fringe trim
INFO:app.routers.outfits:Found 6 products for kimono
INFO:app.routers.outfits:SerpAPI search attempt 1/2 for boots - Brown suede ankle boots with stacked heel
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.serpapi_service:Searching for products: Brown suede ankle boots with stacked heel (category: boots, gender: female)
INFO:app.services.serpapi_service:Using site targeted query: Brown suede ankle boots with stacked heel (site:amazon.com OR site:nordstrom.com OR site:farfetch.com OR site:ssense.com)
ERROR:app.services.serpapi_service:Error searching SerpAPI: 'coroutine' object does not support the asynchronous context manager protocol
WARNING:app.services.serpapi_service:Using fallback products for: Brown suede ankle boots with stacked heel
INFO:app.routers.outfits:Found 6 products for boots
INFO:app.routers.outfits:SerpAPI search attempt 1/2 for hat - Wide brim straw sun hat with black band
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.serpapi_service:Searching for products: Wide brim straw sun hat with black band (category: hat, gender: female)
INFO:app.services.serpapi_service:Using site targeted query: Wide brim straw sun hat with black band (site:amazon.com OR site:nordstrom.com OR site:farfetch.com OR site:ssense.com)
ERROR:app.services.serpapi_service:Error searching SerpAPI: 'coroutine' object does not support the asynchronous context manager protocol
WARNING:app.services.serpapi_service:Using fallback products for: Wide brim straw sun hat with black band
INFO:app.routers.outfits:Found 6 products for hat
ERROR:app.routers.outfits:Error generating outfit: 25 validation errors for Outfit
items.0.product_id
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.product_name
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.brand
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.price
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.image_url
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.product_id
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.product_name
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.brand
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.price
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.image_url
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.product_id
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.product_name
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.brand
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.price
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.image_url
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.product_id
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.product_name
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.brand
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.price
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.image_url
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.product_id
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.product_name
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.brand
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.price
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.image_url
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
ERROR:app.routers.outfits:Traceback (most recent call last):
  File "/Users/fatihbayraktar/fashion AI/backend/app/routers/outfits.py", line 503, in generate_outfit
    outfits = await enhance_outfits_with_products(outfit_concepts, request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fatihbayraktar/fashion AI/backend/app/routers/outfits.py", line 1014, in enhance_outfits_with_products
    outfits.append(Outfit(**outfit))
                   ^^^^^^^^^^^^^^^^
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 25 validation errors for Outfit
items.0.product_id
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.product_name
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.brand
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.price
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.0.image_url
  Field required [type=missing, input_value={'id': 'a11733de-b63f-43c...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.product_id
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.product_name
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.brand
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.price
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.1.image_url
  Field required [type=missing, input_value={'id': '8093c6d8-4e28-4ff...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.product_id
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.product_name
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.brand
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.price
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.2.image_url
  Field required [type=missing, input_value={'id': 'add55b26-f0cb-43d...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.product_id
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.product_name
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.brand
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.price
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.3.image_url
  Field required [type=missing, input_value={'id': 'f4f3f48e-0a16-429...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.product_id
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.product_name
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.brand
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.price
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
items.4.image_url
  Field required [type=missing, input_value={'id': '525a1d73-358a-480...able or rate limited'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

WARNING:app.routers.outfits:Using minimal mock outfits instead of real data
INFO:app.main:Finished request: POST /outfits/generate - Status=200 - Time=52.6623s
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [31127]
WARNING:  StatReload detected changes in 'app/core/cache.py'. Reloading...
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [33388]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [33388]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [42406]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [42406]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [42618]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [42618]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [42878]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [42878]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [42982]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/outfits.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [42982]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [42990]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/services/serpapi_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [42990]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [45958]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/product_search.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [45958]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [80805]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/core/schemas.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [80805]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [80843]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [80843]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [80887]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [80887]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [81717]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/core/monitoring.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [81717]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [85467]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/routers/monitoring.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [85467]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [85480]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Application shutting down, cleaning up resources
INFO:app.core.connection_pool:Closing connection pool serpapi
INFO:app.core.connection_pool:Closing connection pool anthropic
INFO:app.core.connection_pool:Successfully closed all connection pools
INFO:     Application shutdown complete.
INFO:     Finished server process [85480]
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
Process SpawnProcess-16:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 68, in serve
    config.load()
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/uvicorn/config.py", line 467, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/uvicorn/importer.py", line 21, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/fatihbayraktar/fashion AI/backend/app/main.py", line 40, in <module>
    templates = Jinja2Templates(directory=str(templates_path))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fatihbayraktar/fashion AI/.venv/lib/python3.12/site-packages/starlette/templating.py", line 73, in __init__
    assert jinja2 is not None, "jinja2 must be installed to use Jinja2Templates"
           ^^^^^^^^^^^^^^^^^^
AssertionError: jinja2 must be installed to use Jinja2Templates
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:app.core.cache:Cache service initialized
INFO:app.core.config:Attempting to load .env file...
INFO:app.core.config:.env file found at /Users/fatihbayraktar/fashion AI/backend/.env and loaded
INFO:app.core.config:.env file found and loaded: True
INFO:app.core.config:Creating settings instance...
INFO:app.core.config:ANTHROPIC_API_KEY loaded: Exists
INFO:app.core.config:SERPAPI_API_KEY loaded: Exists
INFO:app.core.config:Settings instance created.
INFO:app.services.serpapi_service:SerpAPI key loaded from settings.
INFO:app.services.serpapi_service:Created verified SSL context for SerpAPI service
INFO:app.services.search_optimizer:Loaded search optimization data from analysis results
INFO:     Started server process [87599]
INFO:     Waiting for application startup.
INFO:app.main:Starting application and initializing connection pools
INFO:app.core.connection_pool:Created new connection pool for serpapi
INFO:app.core.connection_pool:Created new connection pool for anthropic
INFO:     Application startup complete.
